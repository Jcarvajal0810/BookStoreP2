version: '3.8'

services:
  user-service:
    build: ./user-service
    container_name: bs2_user
    ports:
      - "6000:6000"
    environment:
      - MONGO_URI=mongodb+srv://Jcarvajal0810:Nutella_0810@sharedm0.d3q2w0n.mongodb.net/userdb?retryWrites=true&w=majority&appName=SharedM0

  user-scheduler:
    build: ./user-scheduler
    container_name: bs2_user_scheduler
    environment:
      - USER_SERVICE_URL=http://user-service:6000
      - MONGO_URI=mongodb+srv://Jcarvajal0810:Nutella_0810@sharedm0.d3q2w0n.mongodb.net/userdb?retryWrites=true&w=majority&appName=SharedM0
    depends_on:
      - user-service

  catalog:
    build: ./catalog
    container_name: bs2_catalog
    ports:
      - "3000:3000"
    environment:
      - MONGO_URI=mongodb+srv://Jcarvajal0810:Nutella_0810@sharedm0.d3q2w0n.mongodb.net/catalogdb?retryWrites=true&w=majority&appName=SharedM0

  order:
    build: ./order
    container_name: bs2_order
    ports:
      - "4000:4000"
    environment:
      - MONGO_URI=mongodb+srv://Jcarvajal0810:Nutella_0810@sharedm0.d3q2w0n.mongodb.net/orderdb?retryWrites=true&w=majority&appName=SharedM0

  cart:
    build: ./cart-service
    container_name: bs2_cart
    ports:
      - "5000:5000"
    environment:
      - MONGO_URI=mongodb+srv://Jcarvajal0810:Nutella_0810@sharedm0.d3q2w0n.mongodb.net/bookstore_cart?retryWrites=true&w=majority&appName=SharedM0

  inventory:
    build: ./inventary-service
    container_name: bs2_inventory
    ports:
      - "8000:6000"
    environment:
      - MONGO_URI=mongodb+srv://Jcarvajal0810:Nutella_0810@sharedm0.d3q2w0n.mongodb.net/inventorydb?retryWrites=true&w=majority&appName=SharedM0

volumes:
  mongo_data:
